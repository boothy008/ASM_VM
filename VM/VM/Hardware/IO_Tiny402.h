#pragma once

constexpr uint16_t  PC_MIN = 0x0000;
constexpr uint16_t  PC_MAX = 0x0FFF;
constexpr uint16_t  CODE_START = 0x8000;
constexpr uint16_t  CODE_END = 0x8FFF;
constexpr uint16_t  MEMORY_SIZE = 0x8FFF;

constexpr uint16_t  VPORTA = 0x0000;
constexpr uint16_t  VPORTB = 0x0004;
constexpr uint16_t  VPORTC = 0x0008;
constexpr uint16_t  RSTCTRL = 0x0040;
constexpr uint16_t  SLPCTRL = 0x0050;
constexpr uint16_t  CLKCTRL = 0x0060;
constexpr uint16_t  BOD = 0x0080;
constexpr uint16_t  VREF = 0x00A0;
constexpr uint16_t  WDT = 0x0100;
constexpr uint16_t  CPUINT = 0x0110;
constexpr uint16_t  CRCSCAN = 0x0120;
constexpr uint16_t  RTC = 0x0140;
constexpr uint16_t  EVSYS = 0x0180;
constexpr uint16_t  CCL = 0x01C0;
constexpr uint16_t  PORTMUX = 0x0200;
constexpr uint16_t  PORTA = 0x0400;
constexpr uint16_t  ADC0 = 0x0600;
constexpr uint16_t  AC0 = 0x0670;
constexpr uint16_t  USART0 = 0x0800;
constexpr uint16_t  TWI0 = 0x0810;
constexpr uint16_t  SPI0 = 0x0820;
constexpr uint16_t  TCA0 = 0x0A00;
constexpr uint16_t  TCB0 = 0x0A50;
constexpr uint16_t  SYSCFG = 0x0F00;
constexpr uint16_t  NVMCTRL = 0x1000;
constexpr uint16_t  SIGROW = 0x1100;
constexpr uint16_t  FUSE = 0x1280;
constexpr uint16_t  LOCKBIT = 0x128A;
constexpr uint16_t  USERROW = 0x1300;

//Vectors
constexpr uint16_t  RESET_VECTOR = 0x0000;
constexpr uint16_t  CRCSCAN_VECTOR = 0x0001;
constexpr uint16_t  BOD_VECTOR = 0x0002;
constexpr uint16_t  PORTA_VECTOR = 0x0003;
constexpr uint16_t  RTC_CNT_VECTOR = 0x0006;
constexpr uint16_t  RTC_PIT_VECTOR = 0x0007;
constexpr uint16_t  TCA0_LUNF_OVF_VECTOR = 0x0008;
constexpr uint16_t  TCA0_HUNF_VECTOR = 0x0009;
constexpr uint16_t  TCA0_LCMP0_CMP0_VECTOR = 0x0010;
constexpr uint16_t  TCA0_LCMP1_CMP1_VECTOR = 0x0011;
constexpr uint16_t  TCA0_LCMP2_CMP2_VECTOR = 0x0012;
constexpr uint16_t  TCB0_INT_VECTOR = 0x0013;
constexpr uint16_t  AC0_AC_VECTOR = 0x0017;
constexpr uint16_t  ADC0_RESRDY_VECTOR = 0x0020;
constexpr uint16_t  ADC0_WCOMP_VECTOR = 0x0021;
constexpr uint16_t  TWI0_TWIS_VECTOR = 0x0024;
constexpr uint16_t  TWI_TWIM_VECTOR = 0x0025;
constexpr uint16_t  SPI0_INT_VECTOR = 0x0026;
constexpr uint16_t  USART0_RXC_VECTOR = 0x0027;
constexpr uint16_t  USART0_DRE_VECTOR = 0x0028;
constexpr uint16_t  USART0_TXC_VECTOR = 0x0029;
constexpr uint16_t  NVMCTRL_EE_VECTOR = 0x0030;

//EEPROM
constexpr uint16_t  EEPROM_START = 0x1400;
constexpr uint16_t  EEPROM_SIZE = 128u;
constexpr uint16_t  EEPROM_PAGE_SIZE = 32u;
constexpr uint16_t  EEPROM_END = (EEPROM_START + EEPROM_SIZE - 1);

///////////////////////////////////
///Instructions
///////////////////////////////////

//	 15-12 11-8 7-4  3-0
//MSB 0000 0000 0000 0000 LSB

#define CEXPR(NAME, SIG_VAL, INST_VAL) constexpr uint16_t I_##NAME##_INST = INST_VAL;\
//constexpr uint16_t I_##NAME##_SIG = SIG_VAL;


//NAME, OPCODE BITS, OPCODE
constexpr uint16_t S_D208 = 0xD208;
CEXPR(LDD_Z_Q, 0xD208, 0x8000)
CEXPR(LDD_Y_Q, 0xD208, 0x8008)
CEXPR(STD_Z, 0xD208, 0x8200)
CEXPR(STD_Y, 0xD208, 0x8208)
constexpr uint16_t S_F000 = 0xF000;
CEXPR(CPI, 0xF000, 0x3000)
CEXPR(SBCI, 0xF000, 0x4000)
CEXPR(SUBI, 0xF000, 0x5000)
CEXPR(ORI, 0xF000, 0x6000)
CEXPR(SBR, 0xF000, 0x6000)
CEXPR(ANDI, 0xF000, 0x7000)
CEXPR(CBR, 0xF000, 0x7000)
CEXPR(RJMP, 0xF000, 0xC000)
CEXPR(RCALL, 0xF000, 0xD000)
CEXPR(LDI, 0xF000, 0xE000)
constexpr uint16_t S_0xF800 = 0xF800;
CEXPR(IN, 0xF800, 0xB000)
CEXPR(OUT, 0xF800, 0xB800)
constexpr uint16_t S_FC00 = 0xFC00;
CEXPR(CPC, 0xFC00, 0x0400)
CEXPR(SBC, 0xFC00, 0x0800)
CEXPR(ADD, 0xFC00, 0x0C00)
CEXPR(LSL, 0xFC00, 0x0C00)
CEXPR(CPSE, 0xFC00, 0x1000)
CEXPR(CP, 0xFC00, 0x1400)
CEXPR(SUB, 0xFC00, 0x1800)
CEXPR(ADC, 0xFC00, 0x1C00)
CEXPR(ROL, 0xFC00, 0x1C00)
CEXPR(AND, 0xFC00, 0x2000)
CEXPR(TST, 0xFC00, 0x2000)
CEXPR(EOR, 0xFC00, 0x2400)
CEXPR(OR, 0xFC00, 0x2800)
CEXPR(MOV, 0xFC00, 0x2C00)
CEXPR(MUL, 0xFC00, 0x9C00)
CEXPR(BRBS, 0xFC00, 0xF000)
CEXPR(BRBC, 0xFC00, 0xF400)
constexpr uint16_t S_FC07 = 0xFC07;
CEXPR(BRCS, 0xFC07, 0xF000)
CEXPR(BRLO, 0xFC07, 0xF000)
CEXPR(BREQ, 0xFC07, 0xF001)
CEXPR(BRMI, 0xFC07, 0xF002)
CEXPR(BRVS, 0xFC07, 0xF003)
CEXPR(BRLT, 0xFC07, 0xF004)
CEXPR(BRHS, 0xFC07, 0xF005)
CEXPR(BRTS, 0xFC07, 0xF006)
CEXPR(BRIE, 0xFC07, 0xF007)
CEXPR(BRCC, 0xFC07, 0xF400)
CEXPR(BRSH, 0xFC07, 0xF400)
CEXPR(BRNE, 0xFC07, 0xF401)
CEXPR(BRPL, 0xFC07, 0xF402)
CEXPR(BRVC, 0xFC07, 0xF403)
CEXPR(BRGE, 0xFC07, 0xF404)
CEXPR(BRHC, 0xFC07, 0xF405)
CEXPR(BRTC, 0xFC07, 0xF406)
CEXPR(BRID, 0xFC07, 0xF407)
constexpr uint16_t S_FC0F = 0xFC0F;
CEXPR(POP, 0xFC0F, 0x900F)
CEXPR(PUSH, 0xFC0F, 0x910F)
constexpr uint16_t S_FE08 = 0xFE08;
CEXPR(BLD, 0xFE08, 0xF800)
CEXPR(BST, 0xFE08, 0xFA00)
CEXPR(SBRC, 0xFE08, 0xFC00)
CEXPR(SBRS, 0xFE08, 0xFE00)
constexpr uint16_t S_FE0E = 0xFE0E;
CEXPR(JMP, 0xFE0E, 0x940C)
CEXPR(CALL, 0xFE0E, 0x940E)
constexpr uint16_t S_FE0F = 0xFE0F;
CEXPR(LD_Z, 0xFE0F, 0x8000)
CEXPR(LD_Y, 0xFE0F, 0x8008)
CEXPR(ST_Z, 0xFE0F, 0x8200)
CEXPR(LDS, 0xFE0F, 0x9000)
CEXPR(LD_Z_INC, 0xFE0F, 0x9001)
CEXPR(LD_DEC_Z, 0xFE0F, 0x9002)
CEXPR(LPM_Z, 0xFE0F, 0x9004)
CEXPR(LPM_Z_INC, 0xFE0F, 0x9005)
CEXPR(LD_Y_INC, 0xFE0F, 0x9009)
CEXPR(LD_DEC_Y, 0xFE0F, 0x900A)
CEXPR(LD_X, 0xFE0F, 0x900C)
CEXPR(LD_X_INC, 0xFE0F, 0x900D)
CEXPR(LD_DEC_X, 0xFE0F, 0x900E)
CEXPR(STS, 0xFE0F, 0x9200)
CEXPR(ST_Z_INC, 0xFE0F, 0x9201)
CEXPR(ST_NEG_Z, 0xFE0F, 0x9202)
CEXPR(ST_Y, 0xFE0F, 0x9208)
CEXPR(ST_Y_INC, 0xFE0F, 0x9209)
CEXPR(ST_DEC_Y, 0xFE0F, 0x920A)
CEXPR(ST_X, 0xFE0F, 0x920C)
CEXPR(ST_X_INC, 0xFE0F, 0x920D)
CEXPR(ST_DEC_X, 0xFE0F, 0x920E)
CEXPR(COM, 0xFE0F, 0x9400)
CEXPR(NEG, 0xFE0F, 0x9401)
CEXPR(SWAP, 0xFE0F, 0x9402)
CEXPR(INC, 0xFE0F, 0x9403)
CEXPR(ASR, 0xFE0F, 0x9405)
CEXPR(LSR, 0xFE0F, 0x9406)
CEXPR(ROR, 0xFE0F, 0x9407)
CEXPR(DEC, 0xFE0F, 0x940A)
constexpr uint16_t S_FF00 = 0xFF00;
CEXPR(MOVW, 0xFF00, 0x0100)
CEXPR(MULS, 0xFF00, 0x0200)
CEXPR(ADIW, 0xFF00, 0x9600)
CEXPR(SBIW, 0xFF00, 0x9700)
CEXPR(CBI, 0xFF00, 0x9800)
CEXPR(SBIC, 0xFF00, 0x9900)
CEXPR(SBI, 0xFF00, 0x9A00)
CEXPR(SBIS, 0xFF00, 0x9B00)
constexpr uint16_t S_FF88 = 0xFF88;
CEXPR(MULSI, 0xFF88, 0x0300)
CEXPR(FMUL, 0xFF88, 0x0308)
CEXPR(FMULS, 0xFF88, 0x0380)
CEXPR(FMULSI, 0xFF88, 0x0388)
constexpr uint16_t S_FF8F = 0xFF8F;
CEXPR(BSET, 0xFF8F, 0x9408) // SEC-SEZ-SEN-SEV-SES-SEH-SET-SEI
CEXPR(BCLR, 0xFF8F, 0x9488) // CLC-CLZ-CLN-CLV-CLS-CLH-CLT-CLI
constexpr uint16_t S_FFFF = 0xFFFF;
CEXPR(IJMP, 0xFFFF, 0x9409)
CEXPR(RET, 0xFFFF, 0x9508)
CEXPR(ICALL, 0xFFFF, 0x9509)
CEXPR(RETI, 0xFFFF, 0x9518)
CEXPR(LPM, 0xFFFF, 0x95C8)

#undef CEXPR